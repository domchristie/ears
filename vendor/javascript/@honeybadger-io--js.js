var e="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global;var t={};(function(e,r){t=r()})(0,(function(){var t="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof e?e:"undefined"!==typeof self?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function getAugmentedNamespace(t){var r=t.default;if("function"==typeof r){var a=function(){return r.apply(this||e,arguments)};a.prototype=r.prototype}else a={};Object.defineProperty(a,"__esModule",{value:true});Object.keys(t).forEach((function(e){var r=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(a,e,r.get?r:{enumerable:true,get:function(){return t[e]}})}));return a}var r={};var n={};var o={};var i={};var c="<unknown>";function parse(e){var t=e.split("\n");return t.reduce((function(e,t){var r=parseChrome(t)||parseWinjs(t)||parseGecko(t)||parseNode(t)||parseJSC(t);r&&e.push(r);return e}),[])}var s=/^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|\/|[a-z]:\\|\\\\).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i;var u=/\((\S*)(?::(\d+))(?::(\d+))\)/;function parseChrome(e){var t=s.exec(e);if(!t)return null;var r=t[2]&&0===t[2].indexOf("native");var n=t[2]&&0===t[2].indexOf("eval");var o=u.exec(t[2]);if(n&&null!=o){t[2]=o[1];t[3]=o[2];t[4]=o[3]}return{file:r?null:t[2],methodName:t[1]||c,arguments:r?[t[2]]:[],lineNumber:t[3]?+t[3]:null,column:t[4]?+t[4]:null}}var l=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i;function parseWinjs(e){var t=l.exec(e);return t?{file:t[2],methodName:t[1]||c,arguments:[],lineNumber:+t[3],column:t[4]?+t[4]:null}:null}var f=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i;var d=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i;function parseGecko(e){var t=f.exec(e);if(!t)return null;var r=t[3]&&t[3].indexOf(" > eval")>-1;var n=d.exec(t[3]);if(r&&null!=n){t[3]=n[1];t[4]=n[2];t[5]=null}return{file:t[3],methodName:t[1]||c,arguments:t[2]?t[2].split(","):[],lineNumber:t[4]?+t[4]:null,column:t[5]?+t[5]:null}}var p=/^\s*(?:([^@]*)(?:\((.*?)\))?@)?(\S.*?):(\d+)(?::(\d+))?\s*$/i;function parseJSC(e){var t=p.exec(e);return t?{file:t[3],methodName:t[1]||c,arguments:[],lineNumber:+t[4],column:t[5]?+t[5]:null}:null}var h=/^\s*at (?:((?:\[object object\])?[^\\/]+(?: \[as \S+\])?) )?\(?(.*?):(\d+)(?::(\d+))?\)?\s*$/i;function parseNode(e){var t=h.exec(e);return t?{file:t[2],methodName:t[1]||c,arguments:[],lineNumber:+t[3],column:t[4]?+t[4]:null}:null}var g=Object.freeze({__proto__:null,parse:parse});var v=getAugmentedNamespace(g);(function(r){var n=t&&t.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:true,get:function(){return t[r]}});Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r);e[n]=t[r]});var o=t&&t.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e.default=t});var i=t&&t.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);o(t,e);return t};var c=t&&t.__awaiter||function(e,t,r,n){function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n.throw(e))}catch(e){o(e)}}function step(e){e.done?r(e.value):adopt(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};var s=t&&t.__generator||function(t,r){var n,o,i,c,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return c={next:verb(0),throw:verb(1),return:verb(2)},"function"===typeof Symbol&&(c[Symbol.iterator]=function(){return this||e}),c;function verb(e){return function(t){return step([e,t])}}function step(e){if(n)throw new TypeError("Generator is already executing.");while(s)try{if(n=1,o&&(i=2&e[0]?o.return:e[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,e[1])).done)return i;(o=0,i)&&(e=[2&e[0],i.value]);switch(e[0]){case 0:case 1:i=e;break;case 4:s.label++;return{value:e[1],done:false};case 5:s.label++;o=e[1];e=[0];continue;case 7:e=s.ops.pop();s.trys.pop();continue;default:if(!(i=s.trys,i=i.length>0&&i[i.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!i||e[1]>i[0]&&e[1]<i[3])){s.label=e[1];break}if(6===e[0]&&s.label<i[1]){s.label=i[1];i=e;break}if(i&&s.label<i[2]){s.label=i[2];s.ops.push(e);break}i[2]&&s.ops.pop();s.trys.pop();continue}e=r.call(t,s)}catch(t){e=[6,t];o=0}finally{n=i=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:true}}};Object.defineProperty(r,"__esModule",{value:true});r.isBrowserConfig=r.clone=r.formatCGIData=r.filterUrl=r.filter=r.generateStackTrace=r.endpoint=r.instrument=r.isErrorObject=r.makeNotice=r.logger=r.sanitize=r.shallowClone=r.runAfterNotifyHandlers=r.runBeforeNotifyHandlers=r.getSourceForBacktrace=r.getCauses=r.calculateBacktraceShift=r.DEFAULT_BACKTRACE_SHIFT=r.makeBacktrace=r.objectIsExtensible=r.objectIsEmpty=r.mergeNotice=r.merge=void 0;var u=i(v);function merge(e,t){var r={};for(var n in e)r[n]=e[n];for(var n in t)r[n]=t[n];return r}r.merge=merge;function mergeNotice(e,t){var r=merge(e,t);e.context&&t.context&&(r.context=merge(e.context,t.context));return r}r.mergeNotice=mergeNotice;function objectIsEmpty(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return false;return true}r.objectIsEmpty=objectIsEmpty;function objectIsExtensible(e){return"function"!==typeof Object.isExtensible||Object.isExtensible(e)}r.objectIsExtensible=objectIsExtensible;function makeBacktrace(e,t,r){void 0===t&&(t=false);void 0===r&&(r=console);if(!e)return[];try{var n=u.parse(e).map((function(e){return{file:e.file,method:e.methodName,number:e.lineNumber,column:e.column}}));t&&n.splice(0,calculateBacktraceShift(n));return n}catch(e){r.debug(e);return[]}}r.makeBacktrace=makeBacktrace;function isFrameFromHbSourceCode(e){var t=false;var r=false;e.file&&(t=e.file.toLowerCase().indexOf("@honeybadger-io")>-1);e.method&&(r=e.method.toLowerCase().indexOf("@honeybadger-io")>-1);return t||r}r.DEFAULT_BACKTRACE_SHIFT=3;function calculateBacktraceShift(e){var t=0;for(var n=0;n<e.length;n++){var o=e[n];if(!isFrameFromHbSourceCode(o)){if(!o.file||"<anonymous>"===o.file){var i=e[n+1];if(i&&isFrameFromHbSourceCode(i)){t++;continue}}break}t++}return t||r.DEFAULT_BACKTRACE_SHIFT}r.calculateBacktraceShift=calculateBacktraceShift;function getCauses(e,t){if(e.cause){var r=[];var n=e;while(r.length<3&&(n=n.cause))r.push({class:n.name,message:n.message,backtrace:"string"==typeof n.stack?makeBacktrace(n.stack,false,t):null});return r}return[]}r.getCauses=getCauses;function getSourceForBacktrace(t,r){return c(this||e,void 0,void 0,(function(){var n,o,i,c;return s(this||e,(function(e){switch(e.label){case 0:n=[];if(!r||!t||!t.length)return[2,n];o=0;e.label=1;case 1:if(!t.length)return[3,3];i=t.splice(0)[o];return[4,r(i.file)];case 2:c=e.sent();n[o]=getSourceCodeSnippet(c,i.number);o++;return[3,1];case 3:return[2,n]}}))}))}r.getSourceForBacktrace=getSourceForBacktrace;function runBeforeNotifyHandlers(e,t){var r=[];var n=true;for(var o=0,i=t.length;o<i;o++){var c=t[o];var s=c(e);false===s&&(n=false);r.push(s)}return{results:r,result:n}}r.runBeforeNotifyHandlers=runBeforeNotifyHandlers;function runAfterNotifyHandlers(e,t,r){e&&e.afterNotify&&e.afterNotify(r,e);for(var n=0,o=t.length;n<o;n++)t[n](r,e);return true}r.runAfterNotifyHandlers=runAfterNotifyHandlers;function shallowClone(e){if("object"!==typeof e||null===e)return{};var t={};for(var r in e)t[r]=e[r];return t}r.shallowClone=shallowClone;function sanitize(e,t){void 0===t&&(t=8);var r=[];function seen(e){if(!e||"object"!==typeof e)return false;for(var t=0;t<r.length;t++){var n=r[t];if(n===e)return true}r.push(e);return false}function canSerialize(e){var t=typeof e;return/function/.test(t)?"toJSON"===e.name:!/symbol/.test(t)&&(null!==e&&("object"!==typeof e||"undefined"!==typeof e.hasOwnProperty))}function serialize(e,r){void 0===r&&(r=0);if(r>=t)return"[DEPTH]";if(!canSerialize(e))return Object.prototype.toString.call(e);if(seen(e))return"[RECURSION]";if(Array.isArray(e))return e.map((function(e){return safeSerialize(e,r+1)}));if("object"===typeof e){var n={};for(var o in e){var i=e[o];Object.prototype.hasOwnProperty.call(e,o)&&null!=o&&null!=i&&(n[o]=safeSerialize(i,r+1))}return n}return e}function safeSerialize(e,t){void 0===t&&(t=0);try{return serialize(e,t)}catch(e){return"[ERROR] ".concat(e)}}return safeSerialize(e)}r.sanitize=sanitize;function logger(e){var log=function(t){return function(){var r;var n=[];for(var o=0;o<arguments.length;o++)n[o]=arguments[o];if("debug"===t){if(!e.config.debug)return;t="log"}n.unshift("[Honeybadger]");(r=e.config.logger)[t].apply(r,n)}};return{log:log("log"),info:log("info"),debug:log("debug"),warn:log("warn"),error:log("error")}}r.logger=logger;function makeNotice(e){var t;if(e)if(isErrorObject(e)){var r=e;t=merge(e,{name:r.name,message:r.message,stack:r.stack,cause:r.cause})}else if("object"===typeof e)t=shallowClone(e);else{var n=String(e);t={message:n}}else t={};return t}r.makeNotice=makeNotice;function isErrorObject(e){return e instanceof Error||"[object Error]"===Object.prototype.toString.call(e)}r.isErrorObject=isErrorObject;
/**
     * Instrument an existing function inside an object (usually global).
     * @param {!Object} object
     * @param {!String} name
     * @param {!Function} replacement
     */function instrument(e,t,r){if(e&&t&&r&&t in e)try{var n=e[t];while(n&&n.__hb_original)n=n.__hb_original;e[t]=r(n);e[t].__hb_original=n}catch(e){}}r.instrument=instrument;function endpoint(e,t){var r=e.trim().replace(/\/$/,"");t=t.trim().replace(/(^\/|\/$)/g,"");return"".concat(r,"/").concat(t)}r.endpoint=endpoint;function generateStackTrace(){try{throw new Error("")}catch(e){if(e.stack)return e.stack}var e=10;var t=[];var r=arguments.callee;while(r&&t.length<e){/function(?:\s+([\w$]+))+\s*\(/.test(r.toString())?t.push(RegExp.$1||"<anonymous>"):t.push("<anonymous>");try{r=r.caller}catch(e){break}}return t.join("\n")}r.generateStackTrace=generateStackTrace;function filter(e,t){if(is("Object",e)){is("Array",t)||(t=[]);var r=[];return filter(e)}function filter(e){var n,o;if(is("Object",e)||is("Array",e)){if(-1!==r.indexOf(e))return"[CIRCULAR DATA STRUCTURE]";r.push(e)}if(is("Object",e)){o={};for(n in e)filterMatch(n,t)?o[n]="[FILTERED]":o[n]=filter(e[n]);return o}return is("Array",e)?e.map((function(e){return filter(e)})):is("Function",e)?"[FUNC]":e}}r.filter=filter;function filterMatch(e,t){for(var r=0;r<t.length;r++)if(-1!==e.toLowerCase().indexOf(t[r].toLowerCase()))return true;return false}function is(e,t){var r=Object.prototype.toString.call(t).slice(8,-1);return void 0!==t&&null!==t&&r===e}function filterUrl(e,t){if(!t)return e;if("string"!==typeof e)return e;var r=e.split(/\?/,2)[1];if(!r)return e;var n=e;r.split(/[&]\s?/).forEach((function(e){var r=e.split("=",2),o=r[0],i=r[1];filterMatch(o,t)&&(n=n.replace("".concat(o,"=").concat(i),"".concat(o,"=[FILTERED]")))}));return n}r.filterUrl=filterUrl;function formatCGIData(e,t){void 0===t&&(t="");var r={};Object.keys(e).forEach((function(n){var o=t+n.replace(/\W/g,"_").toUpperCase();r[o]=e[n]}));return r}r.formatCGIData=formatCGIData;function clone(e){return JSON.parse(JSON.stringify(e))}r.clone=clone;function getSourceCodeSnippet(e,t,r){void 0===r&&(r=2);if(!e)return null;var n=e.split("\n");n.unshift("");var o=t-r;var i=t+r;var c={};for(var s=o;s<=i;s++){var u=n[s];"string"===typeof u&&(c[s]=u)}return c}function isBrowserConfig(e){return void 0!==e.async}r.isBrowserConfig=isBrowserConfig})(i);var b={};Object.defineProperty(b,"__esModule",{value:true});b.GlobalStore=void 0;var y=i;var m=function(){function GlobalStore(t,r){(this||e).contents=t;(this||e).breadcrumbsLimit=r}GlobalStore.create=function(e,t){return new GlobalStore(e,t)};GlobalStore.prototype.available=function(){return true};GlobalStore.prototype.getContents=function(t){var r=t?(this||e).contents[t]:(this||e).contents;return JSON.parse(JSON.stringify(r))};GlobalStore.prototype.setContext=function(t){(this||e).contents.context=(0,y.merge)((this||e).contents.context,t||{})};GlobalStore.prototype.addBreadcrumb=function(t){(this||e).contents.breadcrumbs.length==(this||e).breadcrumbsLimit&&(this||e).contents.breadcrumbs.shift();(this||e).contents.breadcrumbs.push(t)};GlobalStore.prototype.clear=function(){(this||e).contents.context={};(this||e).contents.breadcrumbs=[]};GlobalStore.prototype.run=function(e){return e()};return GlobalStore}();b.GlobalStore=m;var _=t&&t.__assign||function(){_=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e};return _.apply(this||e,arguments)};var w=t&&t.__awaiter||function(e,t,r,n){function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n.throw(e))}catch(e){o(e)}}function step(e){e.done?r(e.value):adopt(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};var E=t&&t.__generator||function(t,r){var n,o,i,c,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return c={next:verb(0),throw:verb(1),return:verb(2)},"function"===typeof Symbol&&(c[Symbol.iterator]=function(){return this||e}),c;function verb(e){return function(t){return step([e,t])}}function step(e){if(n)throw new TypeError("Generator is already executing.");while(s)try{if(n=1,o&&(i=2&e[0]?o.return:e[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,e[1])).done)return i;(o=0,i)&&(e=[2&e[0],i.value]);switch(e[0]){case 0:case 1:i=e;break;case 4:s.label++;return{value:e[1],done:false};case 5:s.label++;o=e[1];e=[0];continue;case 7:e=s.ops.pop();s.trys.pop();continue;default:if(!(i=s.trys,i=i.length>0&&i[i.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!i||e[1]>i[0]&&e[1]<i[3])){s.label=e[1];break}if(6===e[0]&&s.label<i[1]){s.label=i[1];i=e;break}if(i&&s.label<i[2]){s.label=i[2];s.ops.push(e);break}i[2]&&s.ops.pop();s.trys.pop();continue}e=r.call(t,s)}catch(t){e=[6,t];o=0}finally{n=i=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:true}}};Object.defineProperty(o,"__esModule",{value:true});o.Client=void 0;var k=i;var O=b;var j=/,|\s+/;var C=/\S/;var S=function(){function Client(t,r){void 0===t&&(t={});(this||e).__pluginsExecuted=false;(this||e).__store=null;(this||e).__beforeNotifyHandlers=[];(this||e).__afterNotifyHandlers=[];(this||e).__notifier={name:"@honeybadger-io/core",url:"https://github.com/honeybadger-io/honeybadger-js/tree/master/packages/core",version:"6.4.1"};(this||e).config=_({apiKey:null,endpoint:"https://api.honeybadger.io",environment:null,hostname:null,projectRoot:null,component:null,action:null,revision:null,reportData:null,breadcrumbsEnabled:true,maxBreadcrumbs:40,maxObjectDepth:8,logger:console,developmentEnvironments:["dev","development","test"],debug:false,tags:null,enableUncaught:true,enableUnhandledRejection:true,afterUncaught:function(){return true},filters:["creditcard","password"],__plugins:[]},t);this.__initStore();(this||e).__transport=r;(this||e).logger=(0,k.logger)(this||e)}Client.prototype.getVersion=function(){return(this||e).__notifier.version};Client.prototype.getNotifier=function(){return(this||e).__notifier};Client.prototype.setNotifier=function(t){(this||e).__notifier=t};Client.prototype.configure=function(t){var r=this||e;void 0===t&&(t={});for(var n in t)(this||e).config[n]=t[n];if(!(this||e).__pluginsExecuted){(this||e).__pluginsExecuted=true;(this||e).config.__plugins.forEach((function(e){return e.load(r)}))}return this||e};Client.prototype.__initStore=function(){(this||e).__store=new O.GlobalStore({context:{},breadcrumbs:[]},(this||e).config.maxBreadcrumbs)};Client.prototype.beforeNotify=function(t){(this||e).__beforeNotifyHandlers.push(t);return this||e};Client.prototype.afterNotify=function(t){(this||e).__afterNotifyHandlers.push(t);return this||e};Client.prototype.setContext=function(t){"object"===typeof t&&null!=t&&(this||e).__store.setContext(t);return this||e};Client.prototype.resetContext=function(t){(this||e).logger.warn("Deprecation warning: `Honeybadger.resetContext()` has been deprecated; please use `Honeybadger.clear()` instead.");(this||e).__store.clear();"object"===typeof t&&null!==t&&(this||e).__store.setContext(t);return this||e};Client.prototype.clear=function(){(this||e).__store.clear();return this||e};Client.prototype.notify=function(t,r,n){var o=this||e;void 0===r&&(r=void 0);void 0===n&&(n=void 0);var i=this.makeNotice(t,r,n);var c=i&&i.backtrace?i.backtrace.map((function(e){return(0,k.shallowClone)(e)})):null;var s=this.__runPreconditions(i);if(s instanceof Error){(0,k.runAfterNotifyHandlers)(i,(this||e).__afterNotifyHandlers,s);return false}if(s instanceof Promise){s.then((function(e){if(e instanceof Error){(0,k.runAfterNotifyHandlers)(i,o.__afterNotifyHandlers,e);return false}return o.__send(i,c)}));return true}this.__send(i,c).catch((function(e){}));return true};Client.prototype.notifyAsync=function(t,r,n){var o=this||e;void 0===r&&(r=void 0);void 0===n&&(n=void 0);return new Promise((function(e,i){var applyAfterNotify=function(t){var r=t.afterNotify;t.afterNotify=function(t){null===r||void 0===r?void 0:r.call(o,t);if(t)return i(t);e()}};var c;c=t.afterNotify?t:r&&r.afterNotify?r:n&&n.afterNotify?n:r&&"object"===typeof r?r:n||(r={});applyAfterNotify(c);o.notify(t,r,n)}))};Client.prototype.makeNotice=function(t,r,n){void 0===r&&(r=void 0);void 0===n&&(n=void 0);var o=(0,k.makeNotice)(t);if(r&&!("object"===typeof r)){var i=String(r);r={name:i}}r&&(o=(0,k.mergeNotice)(o,r));"object"===typeof n&&null!==n&&(o=(0,k.mergeNotice)(o,n));if((0,k.objectIsEmpty)(o))return null;var c=(this||e).__store.getContents("context");var s=this.__constructTags(o.tags);var u=this.__constructTags(c.tags);var l=this.__constructTags((this||e).config.tags);var f=s.concat(u).concat(l);var d=f.filter((function(e,t){return f.indexOf(e)===t}));o=(0,k.merge)(o,{name:o.name||"Error",context:(0,k.merge)(c,o.context),projectRoot:o.projectRoot||(this||e).config.projectRoot,environment:o.environment||(this||e).config.environment,component:o.component||(this||e).config.component,action:o.action||(this||e).config.action,revision:o.revision||(this||e).config.revision,tags:d});if(!Array.isArray(o.backtrace)||!o.backtrace.length)if("string"===typeof o.stack&&o.stack.trim())o.backtrace=(0,k.makeBacktrace)(o.stack,false,(this||e).logger);else{o.stack=(0,k.generateStackTrace)();o.backtrace=(0,k.makeBacktrace)(o.stack,true,(this||e).logger)}return o};Client.prototype.addBreadcrumb=function(t,r){if((this||e).config.breadcrumbsEnabled){r=r||{};var n=(0,k.shallowClone)(r.metadata);var o=r.category||"custom";var i=(new Date).toISOString();(this||e).__store.addBreadcrumb({category:o,message:t,metadata:n,timestamp:i});return this||e}};Client.prototype.__getBreadcrumbs=function(){return(this||e).__store.getContents("breadcrumbs").slice()};Client.prototype.__getContext=function(){return(this||e).__store.getContents("context")};Client.prototype.__developmentMode=function(){return true!==(this||e).config.reportData&&((this||e).config.environment&&(this||e).config.developmentEnvironments.includes((this||e).config.environment))};Client.prototype.__buildPayload=function(t){var r=(0,k.filter)(t.headers,(this||e).config.filters)||{};var n=(0,k.filter)(_(_({},t.cgiData),(0,k.formatCGIData)(r,"HTTP_")),(this||e).config.filters);return{notifier:(this||e).__notifier,breadcrumbs:{enabled:!!(this||e).config.breadcrumbsEnabled,trail:t.__breadcrumbs||[]},error:{class:t.name,message:t.message,backtrace:t.backtrace,fingerprint:t.fingerprint,tags:t.tags,causes:(0,k.getCauses)(t,(this||e).logger)},request:{url:(0,k.filterUrl)(t.url,(this||e).config.filters),component:t.component,action:t.action,context:t.context,cgi_data:n,params:(0,k.filter)(t.params,(this||e).config.filters)||{},session:(0,k.filter)(t.session,(this||e).config.filters)||{}},server:{project_root:t.projectRoot,environment_name:t.environment,revision:t.revision,hostname:(this||e).config.hostname,time:(new Date).toUTCString()},details:t.details||{}}};Client.prototype.__constructTags=function(e){return e?e.toString().split(j).filter((function(e){return C.test(e)})):[]};Client.prototype.__runPreconditions=function(t){var r=this||e;var n=null;if(!t){(this||e).logger.debug("failed to build error report");n=new Error("failed to build error report")}if(false===(this||e).config.reportData){(this||e).logger.debug("skipping error report: honeybadger.js is disabled",t);n=new Error("honeybadger.js is disabled")}if(this.__developmentMode()){(this||e).logger.log("honeybadger.js is in development mode; the following error report will be sent in production.",t);n=new Error("honeybadger.js is in development mode")}if(!(this||e).config.apiKey){(this||e).logger.warn("could not send error report: no API key has been configured",t);n=new Error("missing API key")}var o=(0,k.runBeforeNotifyHandlers)(t,(this||e).__beforeNotifyHandlers);if(!n&&!o.result){(this||e).logger.debug("skipping error report: one or more beforeNotify handlers returned false",t);n=new Error("beforeNotify handlers returned false")}return o.results.length&&o.results.some((function(e){return e instanceof Promise}))?Promise.allSettled(o.results).then((function(e){if(!n&&e.some((function(e){return"rejected"===e.status||false===e.value}))){r.logger.debug("skipping error report: one or more beforeNotify handlers returned false",t);n=new Error("beforeNotify handlers (async) returned false")}if(n)return n})):n};Client.prototype.__send=function(t,r){var n=this||e;if((this||e).config.breadcrumbsEnabled){this.addBreadcrumb("Honeybadger Notice",{category:"notice",metadata:{message:t.message,name:t.name,stack:t.stack}});t.__breadcrumbs=(this||e).__store.getContents("breadcrumbs")}else t.__breadcrumbs=[];return(0,k.getSourceForBacktrace)(r,(this||e).__getSourceFileHandler).then((function(r){return w(n,void 0,void 0,(function(){var n;return E(this||e,(function(o){r.forEach((function(e,r){t.backtrace[r].source=e}));n=this.__buildPayload(t);return[2,(this||e).__transport.send({headers:{"X-API-Key":(this||e).config.apiKey,"Content-Type":"application/json",Accept:"text/json, application/json"},method:"POST",endpoint:(0,k.endpoint)((this||e).config.endpoint,"/v1/notices/js"),maxObjectDepth:(this||e).config.maxObjectDepth,logger:(this||e).logger},n)]}))}))})).then((function(e){if(201!==e.statusCode){(0,k.runAfterNotifyHandlers)(t,n.__afterNotifyHandlers,new Error("Bad HTTP response: ".concat(e.statusCode)));n.logger.warn("Error report failed: unknown response from server. code=".concat(e.statusCode));return false}var r=JSON.parse(e.body).id;(0,k.runAfterNotifyHandlers)((0,k.merge)(t,{id:r}),n.__afterNotifyHandlers);n.logger.info("Error report sent âš¡ https://app.honeybadger.io/notice/".concat(r));return true})).catch((function(e){n.logger.error("Error report failed: an unknown error occurred.","message=".concat(e.message));(0,k.runAfterNotifyHandlers)(t,n.__afterNotifyHandlers,e);return false}))};return Client}();o.Client=S;var N={};Object.defineProperty(N,"__esModule",{value:true});(function(e){var r=t&&t.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:true,get:function(){return t[r]}});Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r);e[n]=t[r]});var n=t&&t.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e.default=t});var c=t&&t.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};var s=t&&t.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&r(t,e,o);n(t,e);return t};Object.defineProperty(e,"__esModule",{value:true});e.Util=e.Types=e.Client=void 0;var u=o;Object.defineProperty(e,"Client",{enumerable:true,get:function(){return u.Client}});c(b,e);e.Types=s(N);e.Util=s(i)})(n);var x={};Object.defineProperty(x,"__esModule",{value:true});x.globalThisOrWindow=x.preferCatch=x.encodeCookie=x.decodeCookie=x.localURLPathname=x.parseURL=x.nativeFetch=x.stringTextOfElement=x.stringSelectorOfElement=x.stringNameOfElement=void 0;
/**
   * Converts an HTMLElement into a human-readable string.
   * @param {!HTMLElement} element
   * @return {string}
   */function stringNameOfElement(e){if(!e||!e.tagName)return"";var t=e.tagName.toLowerCase();if("html"===t)return"";e.id&&(t+="#".concat(e.id));var r=e.getAttribute("class");r&&r.split(/\s+/).forEach((function(e){t+=".".concat(e)}));["alt","name","title","type"].forEach((function(r){var n=e.getAttribute(r);n&&(t+="[".concat(r,'="').concat(n,'"]'))}));var n=getSiblings(e);n.length>1&&(t+=":nth-child(".concat(Array.prototype.indexOf.call(n,e)+1,")"));return t}x.stringNameOfElement=stringNameOfElement;function stringSelectorOfElement(e){var t=stringNameOfElement(e);if(e.parentNode&&e.parentNode.tagName){var r=stringSelectorOfElement(e.parentNode);if(r.length>0)return"".concat(r," > ").concat(t)}return t}x.stringSelectorOfElement=stringSelectorOfElement;function stringTextOfElement(e){var t=e.textContent||e.innerText||"";t||"submit"!==e.type&&"button"!==e.type||(t=e.value);return truncate(t.trim(),300)}x.stringTextOfElement=stringTextOfElement;function nativeFetch(){var e=globalThisOrWindow();if(!e.fetch)return false;if(isNative(e.fetch))return true;if("undefined"===typeof document)return false;try{var t=document.createElement("iframe");t.style.display="none";document.head.appendChild(t);var r=t.contentWindow.fetch&&isNative(t.contentWindow.fetch);document.head.removeChild(t);return r}catch(e){console&&console.warn&&console.warn("failed to detect native fetch via iframe: "+e)}return false}x.nativeFetch=nativeFetch;function isNative(e){return-1!==e.toString().indexOf("native")}function parseURL(e){var t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/)||{};return{protocol:t[2],host:t[4],pathname:t[5]}}x.parseURL=parseURL;function localURLPathname(e){var t=parseURL(e);var r=parseURL(document.URL);return t.host&&t.protocol?t.protocol===r.protocol&&t.host===r.host?t.pathname:"".concat(t.protocol,"://").concat(t.host).concat(t.pathname):t.pathname}x.localURLPathname=localURLPathname;function decodeCookie(e){var t={};e.split(/[;,]\s?/).forEach((function(e){var r=e.split("=",2),n=r[0],o=r[1];t[n]=o}));return t}x.decodeCookie=decodeCookie;function encodeCookie(e){if("object"===typeof e){var t=[];for(var r in e)t.push(r+"="+e[r]);return t.join(";")}}x.encodeCookie=encodeCookie;function getSiblings(e){try{var t=e.parentNode.childNodes;var r=[];Array.prototype.forEach.call(t,(function(t){t.tagName&&t.tagName===e.tagName&&r.push(t)}));return r}catch(e){return[]}}function truncate(e,t){e.length>t&&(e=e.substr(0,t)+"...");return e}x.preferCatch=function(){var e=true;if("undefined"===typeof window)return e;window.atob||(e=false);if(window.ErrorEvent)try{0===new window.ErrorEvent("").colno&&(e=false)}catch(e){}return e}();function globalThisOrWindow(){return"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:window}x.globalThisOrWindow=globalThisOrWindow;var T={};Object.defineProperty(T,"__esModule",{value:true});T.onError=T.ignoreNextOnError=void 0;var U=n;var H=x;var P=U.Util.instrument,B=U.Util.makeNotice;var R=0;var A;function ignoreNextOnError(){R+=1;clearTimeout(A);A=setTimeout((function(){R=0}))}T.ignoreNextOnError=ignoreNextOnError;function onError(e){void 0===e&&(e=(0,H.globalThisOrWindow)());return{load:function(t){P(e,"onerror",(function(r){var onerror=function(e,r,n,o,i){t.logger.debug("window.onerror callback invoked",arguments);if(R>0){t.logger.debug("Ignoring window.onerror (error likely reported earlier)",arguments);R-=1}else if(0===n&&/Script error\.?/.test(e))t.config.enableUncaught&&t.logger.warn("Ignoring cross-domain script error: enable CORS to track these types of errors",arguments);else{var c=B(i);c.name||(c.name="window.onerror");c.message||(c.message=e);c.stack||(c.stack=[c.message,"\n    at ? (",r||"unknown",":",n||0,":",o||0,")"].join(""));t.addBreadcrumb("window.onerror"!==c.name&&c.name?"window.onerror: ".concat(c.name):"window.onerror",{category:"error",metadata:{name:c.name,message:c.message,stack:c.stack}});t.config.enableUncaught&&t.notify(c)}};return function(t,n,o,i,c){onerror(t,n,o,i,c);return"function"===typeof r&&r.apply(e,arguments)}}))}}}T.onError=onError;var F={};Object.defineProperty(F,"__esModule",{value:true});var I=n;var L=x;var M=I.Util.instrument;function default_1$3(t){void 0===t&&(t=(0,L.globalThisOrWindow)());return{load:function(r){r.config.enableUnhandledRejection&&M(t,"onunhandledrejection",(function(t){function onunhandledrejection(e){var t;r.logger.debug("window.onunhandledrejection callback invoked",arguments);if(r.config.enableUnhandledRejection){var n=e.reason;if(n instanceof Error){var o="unknown";var i=0;var c="".concat(n.message,"\n    at ? (").concat(o,":").concat(i,")");var s=n.stack||c;var u={name:n.name,message:"UnhandledPromiseRejectionWarning: ".concat(n),stack:s};r.addBreadcrumb("window.onunhandledrejection: ".concat(u.name),{category:"error",metadata:u});r.notify(u)}else{var l="string"===typeof n?n:null!==(t=JSON.stringify(n))&&void 0!==t?t:"Unspecified reason";r.notify({name:"window.onunhandledrejection",message:"UnhandledPromiseRejectionWarning: ".concat(l)})}}}return function(r){onunhandledrejection(r);"function"===typeof t&&t.apply(this||e,arguments)}}))}}}F.default=default_1$3;var D={};Object.defineProperty(D,"__esModule",{value:true});var W=n;var G=x;var z=W.Util.sanitize,$=W.Util.instrument;function default_1$2(t){void 0===t&&(t=(0,G.globalThisOrWindow)());return{load:function(r){function breadcrumbsEnabled(e){return true===r.config.breadcrumbsEnabled||(e?true===r.config.breadcrumbsEnabled[e]:false!==r.config.breadcrumbsEnabled)}(function(){breadcrumbsEnabled("console")&&["debug","info","warn","error","log"].forEach((function(e){$(t.console,e,(function(n){return function(){var o=Array.prototype.slice.call(arguments);var i=inspectArray(o);var c={category:"log",metadata:{level:e,arguments:z(o,3)}};r.addBreadcrumb(i,c);"function"===typeof n&&Function.prototype.apply.call(n,t.console,arguments)}}))}));function inspectArray(e){return Array.isArray(e)?e.map((function(e){try{return String(e)}catch(e){return"[unknown]"}})).join(" "):""}})();(function(){breadcrumbsEnabled("dom")&&"function"===typeof t.addEventListener&&t.addEventListener("click",(function(e){var t,n,o;try{t=(0,G.stringNameOfElement)(e.target);n=(0,G.stringSelectorOfElement)(e.target);o=(0,G.stringTextOfElement)(e.target)}catch(e){t="UI Click";n="[unknown]";o="[unknown]"}0!==t.length&&r.addBreadcrumb(t,{category:"ui.click",metadata:{selector:n,text:o,event:e}})}),!!t.location)})();(function(){if(breadcrumbsEnabled("network")&&"undefined"!==typeof XMLHttpRequest){$(XMLHttpRequest.prototype,"open",(function(t){return function(){var r=this||e;var n=arguments[1];var o="string"===typeof n?n:String(n);var i="string"===typeof arguments[0]?arguments[0].toUpperCase():arguments[0];var c="".concat(i," ").concat((0,G.localURLPathname)(o));(this||e).__hb_xhr={type:"xhr",method:i,url:o,message:c};"function"===typeof t&&t.apply(r,arguments)}}));$(XMLHttpRequest.prototype,"send",(function(t){return function(){var n=this||e;function onreadystatechangeHandler(){if(4===n.readyState){var e=void 0;if(n.__hb_xhr){n.__hb_xhr.status_code=n.status;e=n.__hb_xhr.message;delete n.__hb_xhr.message}r.addBreadcrumb(e||"XMLHttpRequest",{category:"request",metadata:n.__hb_xhr})}}"onreadystatechange"in n&&"function"===typeof n.onreadystatechange?$(n,"onreadystatechange",(function(t){return function(){onreadystatechangeHandler();"function"===typeof t&&t.apply(this||e,arguments)}})):n.onreadystatechange=onreadystatechangeHandler;"function"===typeof t&&t.apply(n,arguments)}}))}})();(function(){breadcrumbsEnabled("network")&&(0,G.nativeFetch)()&&$(t,"fetch",(function(n){return function(){var o=arguments[0];var i="GET";var c;if("string"===typeof o)c=o;else if("Request"in t&&o instanceof Request){c=o.url;o.method&&(i=o.method)}else c=String(o);arguments[1]&&arguments[1].method&&(i=arguments[1].method);"string"===typeof i&&(i=i.toUpperCase());var s="".concat(i," ").concat("undefined"===typeof document?c:(0,G.localURLPathname)(c));var u={type:"fetch",method:i,url:c};return n.apply(this||e,arguments).then((function(e){u.status_code=e.status;r.addBreadcrumb(s,{category:"request",metadata:u});return e})).catch((function(e){r.addBreadcrumb("fetch error",{category:"error",metadata:u});throw e}))}}))})();(function(){if(breadcrumbsEnabled("navigation")&&null!=t.location){var n=t.location.href;"function"===typeof addEventListener&&addEventListener("popstate",(function(e){recordUrlChange(n,t.location.href)}));if("undefined"!==typeof t.history){$(t.history,"pushState",historyWrapper);$(t.history,"replaceState",historyWrapper)}}function recordUrlChange(e,t){n=t;r.addBreadcrumb("Page changed",{category:"navigation",metadata:{from:e,to:t}})}function historyWrapper(t){return function(){var r=arguments.length>2?arguments[2]:void 0;r&&recordUrlChange(n,String(r));return t.apply(this||e,arguments)}}})()}}}D.default=default_1$2;var q={};Object.defineProperty(q,"__esModule",{value:true});var K=n;var J=x;var X=K.Util.instrument;function default_1$1(e){void 0===e&&(e=(0,J.globalThisOrWindow)());return{load:function(t){(function(){function instrumentTimer(e){return function(r){return function(n,o){if("function"===typeof n){var i=Array.prototype.slice.call(arguments,2);n=t.__wrap(n,e);return r((function(){n.apply(void 0,i)}),o)}return r(n,o)}}}X(e,"setTimeout",instrumentTimer({component:"setTimeout"}));X(e,"setInterval",instrumentTimer({component:"setInterval"}))})()}}}q.default=default_1$1;var V={};Object.defineProperty(V,"__esModule",{value:true});var Q=n;var Y=x;var Z=Q.Util.instrument;function default_1(t){void 0===t&&(t=(0,Y.globalThisOrWindow)());return{load:function(r){var n=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"];n.forEach((function(n){var o=t[n]&&t[n].prototype;if(o&&Object.prototype.hasOwnProperty.call(o,"addEventListener")){Z(o,"addEventListener",(function(t){var o={component:"".concat(n,".prototype.addEventListener")};return function(n,i,c,s){try{i&&null!=i.handleEvent&&(i.handleEvent=r.__wrap(i.handleEvent,o))}catch(e){r.logger.error(e)}return t.call(this||e,n,r.__wrap(i,o),c,s)}}));Z(o,"removeEventListener",(function(t){return function(n,o,i,c){t.call(this||e,n,o,i,c);return t.call(this||e,n,r.__wrap(o),i,c)}}))}}))}}}V.default=default_1;var ee={};var te=t&&t.__awaiter||function(e,t,r,n){function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n.throw(e))}catch(e){o(e)}}function step(e){e.done?r(e.value):adopt(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};var re=t&&t.__generator||function(t,r){var n,o,i,c,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return c={next:verb(0),throw:verb(1),return:verb(2)},"function"===typeof Symbol&&(c[Symbol.iterator]=function(){return this||e}),c;function verb(e){return function(t){return step([e,t])}}function step(e){if(n)throw new TypeError("Generator is already executing.");while(s)try{if(n=1,o&&(i=2&e[0]?o.return:e[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,e[1])).done)return i;(o=0,i)&&(e=[2&e[0],i.value]);switch(e[0]){case 0:case 1:i=e;break;case 4:s.label++;return{value:e[1],done:false};case 5:s.label++;o=e[1];e=[0];continue;case 7:e=s.ops.pop();s.trys.pop();continue;default:if(!(i=s.trys,i=i.length>0&&i[i.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!i||e[1]>i[0]&&e[1]<i[3])){s.label=e[1];break}if(6===e[0]&&s.label<i[1]){s.label=i[1];i=e;break}if(i&&s.label<i[2]){s.label=i[2];s.ops.push(e);break}i[2]&&s.ops.pop();s.trys.pop();continue}e=r.call(t,s)}catch(t){e=[6,t];o=0}finally{n=i=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:true}}};Object.defineProperty(ee,"__esModule",{value:true});ee.BrowserTransport=void 0;var ne=n;var oe=x;var ae=ne.Util.sanitize;function objectEntries(e){return Object.entries(e)}var ie=function(){function BrowserTransport(){}BrowserTransport.prototype.send=function(t,r){return te(this||e,void 0,void 0,(function(){var n,o,i,c,s;return re(this||e,(function(e){switch(e.label){case 0:n=t.headers?objectEntries(t.headers):[];o={};n.forEach((function(e){var t=e[0],r=e[1];null!=t&&null!=r&&(o[String(t)]=String(r))}));i={method:t.method,headers:o};"POST"===t.method&&(i.body=r?JSON.stringify(ae(r,t.maxObjectDepth)):void 0);return[4,(0,oe.globalThisOrWindow)().fetch(t.endpoint,i)];case 1:c=e.sent();return[4,c.text()];case 2:s=e.sent();return[2,Promise.resolve({statusCode:c.status,body:s})]}}))}))};return BrowserTransport}();ee.BrowserTransport=ie;(function(r){var o=t&&t.__extends||function(){var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])};return extendStatics(e,t)};return function(t,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");extendStatics(t,r);function __(){(this||e).constructor=t}t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}}();var i=t&&t.__assign||function(){i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e};return i.apply(this||e,arguments)};var c=t&&t.__awaiter||function(e,t,r,n){function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n.throw(e))}catch(e){o(e)}}function step(e){e.done?r(e.value):adopt(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};var s=t&&t.__generator||function(t,r){var n,o,i,c,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return c={next:verb(0),throw:verb(1),return:verb(2)},"function"===typeof Symbol&&(c[Symbol.iterator]=function(){return this||e}),c;function verb(e){return function(t){return step([e,t])}}function step(e){if(n)throw new TypeError("Generator is already executing.");while(s)try{if(n=1,o&&(i=2&e[0]?o.return:e[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,e[1])).done)return i;(o=0,i)&&(e=[2&e[0],i.value]);switch(e[0]){case 0:case 1:i=e;break;case 4:s.label++;return{value:e[1],done:false};case 5:s.label++;o=e[1];e=[0];continue;case 7:e=s.ops.pop();s.trys.pop();continue;default:if(!(i=s.trys,i=i.length>0&&i[i.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!i||e[1]>i[0]&&e[1]<i[3])){s.label=e[1];break}if(6===e[0]&&s.label<i[1]){s.label=i[1];i=e;break}if(i&&s.label<i[2]){s.label=i[2];s.ops.push(e);break}i[2]&&s.ops.pop();s.trys.pop();continue}e=r.call(t,s)}catch(t){e=[6,t];o=0}finally{n=i=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:true}}};var u=t&&t.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:true});r.Types=r.getUserFeedbackScriptUrl=void 0;var l=n;var f=x;var d=T;var p=u(F);var h=u(D);var g=u(q);var v=u(V);var b=ee;var y=l.Util.merge,m=l.Util.filter,_=l.Util.objectIsExtensible;var getProjectRoot=function(){var e=(0,f.globalThisOrWindow)();var t="";null!=e.location&&(t=e.location.protocol+"//"+e.location.host);return t};var getUserFeedbackScriptUrl=function(e){var t=e.split(".").slice(0,2).join(".");return"https://js.honeybadger.io/v".concat(t,"/honeybadger-feedback-form.js")};r.getUserFeedbackScriptUrl=getUserFeedbackScriptUrl;var w=function(t){o(Honeybadger,t);function Honeybadger(r){void 0===r&&(r={});var n=t.call(this||e,i({userFeedbackEndpoint:"https://api.honeybadger.io/v2/feedback",async:true,maxErrors:null,projectRoot:getProjectRoot()},r),new b.BrowserTransport)||this||e;n.__errorsSent=0;n.__lastWrapErr=void 0;n.__lastNoticeId=void 0;n.__beforeNotifyHandlers=[function(e){if(n.__exceedsMaxErrors()){n.logger.debug("Dropping notice: max errors exceeded",e);return false}e&&!e.url&&"undefined"!==typeof document&&(e.url=document.URL);n.__incrementErrorsCount();return true}];n.__afterNotifyHandlers=[function(e,t){t&&(n.__lastNoticeId=t.id)}];return n}Honeybadger.prototype.configure=function(r){void 0===r&&(r={});return t.prototype.configure.call(this||e,r)};Honeybadger.prototype.resetMaxErrors=function(){return(this||e).__errorsSent=0};Honeybadger.prototype.factory=function(e){var t=new Honeybadger(e);t.setNotifier(this.getNotifier());return t};Honeybadger.prototype.checkIn=function(e){throw new Error("Honeybadger.checkIn() is not supported on the browser")};Honeybadger.prototype.showUserFeedbackForm=function(t){void 0===t&&(t={});return c(this||e,void 0,void 0,(function(){var r,n;return s(this||e,(function(o){if(!(this||e).config||!(this||e).config.apiKey){(this||e).logger.debug("Client not initialized");return[2]}if(!(this||e).__lastNoticeId){(this||e).logger.debug("Can't show user feedback form without a notice already reported");return[2]}r=(0,f.globalThisOrWindow)();if("undefined"===typeof r.document){(this||e).logger.debug("global.document is undefined. Cannot attach script");return[2]}if(this.isUserFeedbackScriptUrlAlreadyVisible()){(this||e).logger.debug("User feedback form is already visible");return[2]}r.honeybadgerUserFeedbackOptions=i(i({},t),{apiKey:(this||e).config.apiKey,endpoint:(this||e).config.userFeedbackEndpoint,noticeId:(this||e).__lastNoticeId});n=r.document.createElement("script");n.setAttribute("src",this.getUserFeedbackSubmitUrl());n.setAttribute("async","true");t.onLoad&&(n.onload=t.onLoad);(r.document.head||r.document.body).appendChild(n);return[2]}))}))};Honeybadger.prototype.isUserFeedbackScriptUrlAlreadyVisible=function(){var e=(0,f.globalThisOrWindow)();var t=this.getUserFeedbackSubmitUrl();for(var r=0;r<e.document.scripts.length;r++){var n=e.document.scripts[r];if(n.src===t)return true}return false};Honeybadger.prototype.getUserFeedbackSubmitUrl=function(){return(0,r.getUserFeedbackScriptUrl)(this.getVersion())};Honeybadger.prototype.__buildPayload=function(r){var n={HTTP_USER_AGENT:void 0,HTTP_REFERER:void 0,HTTP_COOKIE:void 0};"undefined"!==typeof navigator&&navigator.userAgent&&(n.HTTP_USER_AGENT=navigator.userAgent);"undefined"!==typeof document&&document.referrer.match(/\S/)&&(n.HTTP_REFERER=document.referrer);var o;o="string"===typeof r.cookies?(0,f.decodeCookie)(r.cookies):r.cookies;o&&(n.HTTP_COOKIE=(0,f.encodeCookie)(m(o,(this||e).config.filters)));var i=t.prototype.__buildPayload.call(this||e,r);i.request.cgi_data=y(n,i.request.cgi_data);return i};Honeybadger.prototype.__wrap=function(t,r){void 0===r&&(r={});var n=t;r||(r={});try{if("function"!==typeof n)return n;if(!_(n))return n;if(!n.___hb){var o=this||e;n.___hb=function(){if(!f.preferCatch)return n.apply(this||e,arguments);try{return n.apply(this||e,arguments)}catch(e){if(o.__lastWrapErr===e)throw e;o.__lastWrapErr=e;(0,d.ignoreNextOnError)();o.addBreadcrumb(r.component?"".concat(r.component,": ").concat(e.name):e.name,{category:"error",metadata:{message:e.message,name:e.name,stack:e.stack}});o.config.enableUncaught&&o.notify(e);throw e}}}n.___hb.___hb=n.___hb;return n.___hb}catch(e){return n}};Honeybadger.prototype.__incrementErrorsCount=function(){return(this||e).__errorsSent++};Honeybadger.prototype.__exceedsMaxErrors=function(){return(this||e).config.maxErrors&&(this||e).__errorsSent>=(this||e).config.maxErrors};return Honeybadger}(l.Client);var E=new w({__plugins:[(0,d.onError)(),(0,p.default)(),(0,g.default)(),(0,v.default)(),(0,h.default)()]});var k={name:"@honeybadger-io/js",url:"https://github.com/honeybadger-io/honeybadger-js/tree/master/packages/js",version:"6.4.1"};E.setNotifier(k);var O=n;Object.defineProperty(r,"Types",{enumerable:true,get:function(){return O.Types}});r.default=E})(r);var ce=getDefaultExportFromCjs(r);return ce}));var r=t;const n=t.__esModule,o=t.isBrowserConfig,i=t.clone,c=t.formatCGIData,s=t.filterUrl,u=t.filter,l=t.generateStackTrace,f=t.endpoint,d=t.instrument,p=t.isErrorObject,h=t.makeNotice,g=t.logger,v=t.sanitize,b=t.shallowClone,y=t.runAfterNotifyHandlers,m=t.runBeforeNotifyHandlers,_=t.getSourceForBacktrace,w=t.getCauses,E=t.calculateBacktraceShift,k=t.DEFAULT_BACKTRACE_SHIFT,O=t.makeBacktrace,j=t.objectIsExtensible,C=t.objectIsEmpty,S=t.mergeNotice,N=t.merge,x=t.Util,T=t.Types,U=t.Client,H=t.getUserFeedbackScriptUrl;export{U as Client,k as DEFAULT_BACKTRACE_SHIFT,T as Types,x as Util,n as __esModule,E as calculateBacktraceShift,i as clone,r as default,f as endpoint,u as filter,s as filterUrl,c as formatCGIData,l as generateStackTrace,w as getCauses,_ as getSourceForBacktrace,H as getUserFeedbackScriptUrl,d as instrument,o as isBrowserConfig,p as isErrorObject,g as logger,O as makeBacktrace,h as makeNotice,N as merge,S as mergeNotice,C as objectIsEmpty,j as objectIsExtensible,y as runAfterNotifyHandlers,m as runBeforeNotifyHandlers,v as sanitize,b as shallowClone};

