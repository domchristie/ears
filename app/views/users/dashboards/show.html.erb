<%= render "container" do %>
  <h2 class="flex items-center text-sm uppercase tracking-wide font-semibold mt-6 mb-3 text-neutral-500">
    Recently Played
  </h2>

  <div class="flex flex-nowrap space-x-4 pb-4 overflow-x-auto transform-gpu">
    <% @dashboard.recently_played.each do |feed| %>
      <% play = feed.most_recent_play %>
      <%= render "feeds/featured", feed: feed do %>
        <% if play.remaining > 60 %>
          <div class="flex items-center absolute top-1.5 left-1.5 whitespace-nowrap px-1.5 leading-5 bg-white/95 text-neutral-400 text-xs font-medium">
            <%= render(
              "timer",
              progress: play.progress,
              options: {
                aria: { hidden: true },
                data: {
                  player_target: "timerIcon",
                  href: play.entry.enclosure_url
                },
                class: "h-4 w-4 -ml-0.5 mr-1 text-neutral-300"
              }
            ) %>
            <%= render(
              "plays/remaining",
              remaining: play.remaining,
              options: {
                data: {
                  player_target: "remainingInWords",
                  href: play.entry.enclosure_url
                },
                class: "text-neutral-500"
              }
            ) %>
          </div>
        <% end %>
      <% end %>
    <% end %>
  </div>

  <h2 class="flex text-sm uppercase tracking-wide font-semibold mt-6 mb-3 text-neutral-500">
    Recently Updated
  </h2>

  <div class="flex flex-nowrap space-x-4 pb-4 overflow-x-auto transform-gpu">
    <% @dashboard.recently_updated.each do |feed| %>
      <%= render "feeds/featured", feed: feed do %>
        <div class="flex items-center absolute bottom-1.5 left-1.5 whitespace-nowrap px-1.5 leading-5 bg-white/95 text-neutral-500 text-xs font-medium">
          <%= local_relative_time(
            feed.most_recent_entry.published_at,
            type: :weekday,
            class: "capitalize"
          ) %>
        </div>
      <% end %>
    <% end %>
  </div>

  <h2 class="flex text-sm uppercase tracking-wide font-semibold mt-6 mb-1 text-neutral-500">
    Your Feeds
  </h2>

  <%= render "list" do %>
    <%= render partial: "feeds/feed", collection: @dashboard.feeds %>
  <% end %>
<% end %>
